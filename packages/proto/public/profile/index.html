<!DOCTYPE html>
<html>
    <head>
          <link rel="stylesheet" href="../styles/page.css"/>
          <link rel="stylesheet" href="../styles/tokens.css"/>
          <link rel="stylesheet" href="../styles/reset.css"/>
          <link rel="stylesheet" href="../styles/details.css"/>
          <link rel="preconnect" href="https://fonts.googleapis.com">
          <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
          <link href="https://fonts.googleapis.com/css2?family=Roboto+Serif:ital,opsz,wght@0,8..144,100..900;1,8..144,100..900&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel="stylesheet">
          <script src="../js/load.js"></script>     
          <script type="module" src="../js/drop-down.js"></script>
          <script type="module" src="../js/json-loader.js"></script>

          <script type="text/javascript"> 

            const parser = new DOMParser();
            function relayEvent(event, customType, detail) {
                const relay = event.currentTarget;
                const customEvent = new CustomEvent(customType, {
                bubbles: true,
                detail,
            });
                relay.dispatchEvent(customEvent);
                event.stopPropagation();
            };

            document.addEventListener('DOMContentLoaded', (event) => {
            document.body.addEventListener("dark-mode", (event) => {
                const page = document.body; 
                const checked = event.detail.checked;
                page.classList.toggle("dark-mode", checked);
            });
        });

        </script>

        
    </head>

    <body class="page">
        <header>
          <h1>Movie Reviews</h1>
          <drop-down>
            <label
              onchange="relayEvent(
              event, 
              'dark-mode', 
              {checked: event.target.checked})">
              <input type="checkbox" autocomplete="off" /> Dark mode
            </label>
          </drop-down>
        </header>
        <main>
          <restful-form slot="form" src="/api/profiles/blaze">
            <label>
              <span>Username</span>
              <input name="id" disabled />
            </label>
            <label>
              <span>Name</span>
              <input name="name" />
            </label>
            <label>
              <span>Nickname</span>
              <input name="nickname" />
            </label>
            <label>
              <span>Color</span>
              <input type="color" name="color" />
            </label>
            <label>
              <span>Avatar</span>
              <input name="avatar" />
            </label>
            <button
              slot="delete"
              onclick="relayEvent(event,'restful-form:delete')"
              >Delete this Profile</button
            >
          </restful-form>
          <json-object src="/api/profiles/blaze">
            <a
              href="#"
              onclick="relayEvent(event, 'json-object:open')">
              Blaze Pasquale
            </a>
          </json-object>
        </main>
      </body>
    </html>